<script>
  document.getElementById("resumeForm").addEventListener("submit", function(e){
    e.preventDefault();
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Name at top
    doc.setFontSize(22);
    doc.text(document.getElementById("name").value, 20, 20);

    doc.setFontSize(12);
    doc.text("Email: " + document.getElementById("email").value, 20, 30);
    doc.text("Phone: " + document.getElementById("phone").value, 20, 38);

    // Divider
    doc.line(20, 45, 190, 45);

    // Section helper
    let y = 60;
    function addSection(title, content) {
      if (content.trim() !== "") {
        doc.setFontSize(14);
        doc.setFont(undefined, "bold");
        doc.text(title, 20, y);
        y += 8;
        doc.setFontSize(12);
        doc.setFont(undefined, "normal");

        let splitText = doc.splitTextToSize(content, 170);

        splitText.forEach(line => {
          if (y > 280) { // near page bottom
            doc.addPage();
            y = 20;
          }
          doc.text(line, 20, y);
          y += 6;
        });
        y += 10;
      }
    }

    addSection("Education", document.getElementById("education").value);
    addSection("Experience", document.getElementById("experience").value);
    addSection("Skills", document.getElementById("skills").value);

    doc.save("resume.pdf");
  });
</script>
